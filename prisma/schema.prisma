// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model License {
  id             Int      @id @default(autoincrement())
  Contratto      String?
  Produttore     String?
  Prodotto       String   @unique
  Tipo_Licenza   String?
  Numero_Licenze Int?
  Bundle         Int?
  Rivenditore    String?
  Scadenza       DateTime? @db.Date

  suppliers LicensesOnSuppliers[]
  rdas      Rda[]
}

model Supplier {
  id              Int      @id @default(autoinvert())
  fornitore       String   @unique
  anno            Int?
  email           String?
  link_rda        String?
  fornitore_unico Boolean?
  Prodotto        String?

  licenses LicensesOnSuppliers[]
}

model Rda {
  rda         String @id
  anno        Int?
  rivenditore String?

  license   License @relation(fields: [licenseId], references: [id])
  licenseId Int
}

model LicensesOnSuppliers {
  license    License  @relation(fields: [licenseId], references: [id])
  licenseId  Int
  supplier   Supplier @relation(fields: [supplierId], references: [id])
  supplierId Int

  @@id([licenseId, supplierId])
}
