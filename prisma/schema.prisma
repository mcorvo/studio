
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model License {
  id              Int      @id @default(autoincrement())
  Contratto       String?
  Produttore      String?
  Prodotto        String   @unique
  Tipo_Licenza    String?
  Numero_Licenze  Int?
  Bundle          Int?
  Rivenditore     String?
  Scadenza        DateTime? @db.Date

  suppliers       LicensesOnSuppliers[]
  rdas            Rda[]
}

model Supplier {
  id         Int      @id @default(autoincrement())
  fornitore  String   @unique
  email      String?
  
  licenses   LicensesOnSuppliers[]
}

// Join table for many-to-many relationship between License and Supplier
model LicensesOnSuppliers {
  license     License  @relation(fields: [licenseId], references: [id])
  licenseId   Int
  supplier    Supplier @relation(fields: [supplierId], references: [id])
  supplierId  Int

  @@id([licenseId, supplierId])
}

model Rda {
  id          Int      @id @default(autoincrement())
  rda         String   @unique
  prodotto    String
  anno        Int?
  rivenditore String?

  license     License? @relation(fields: [licenseId], references: [Prodotto])
  licenseId   String?
}

model Requests {
  id          Int      @id @default(autoincrement())
  Richiedente String
  Prodotto    String
  Quantita    Int
  Budget      Float
  Anno        Int
}

