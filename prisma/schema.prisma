
// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model License {
  id              Int      @id @default(autoincrement())
  Contratto       String?
  Produttore      String?
  Prodotto        String   @unique
  Tipo_Licenza    String?
  Numero_Licenze  Int?
  Bundle          Int?
  Rivenditore     String?
  Scadenza        DateTime?
  
  suppliers       LicensesOnSuppliers[]
  rdas            Rda[]

  @@map("licenses")
}

model Supplier {
  id          Int      @id @default(autoincrement())
  fornitore   String   @unique
  email       String   @unique

  licenses    LicensesOnSuppliers[]

  @@map("suppliers")
}

// Join table for the many-to-many relationship between License and Supplier
model LicensesOnSuppliers {
  license     License  @relation(fields: [licenseId], references: [id])
  licenseId   Int
  supplier    Supplier @relation(fields: [supplierId], references: [id])
  supplierId  Int

  @@id([licenseId, supplierId])
}


model Rda {
  id          Int      @id @default(autoincrement())
  rda         String   @unique
  prodotto    String
  anno        Int
  rivenditore String?

  license     License? @relation(fields: [licenseId], references: [Prodotto])
  licenseId   String?

  @@map("rdas")
}
